(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{7723:function(e,t,a){Promise.resolve().then(a.bind(a,9463))},9463:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),i=a(2265),r=a(9376),n=a(9116);function o(){let[e,t]=(0,i.useState)(""),[a,o]=(0,i.useState)([{name:"",email:"",designation:"",team:""}]),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(""),[m,p]=(0,i.useState)(""),[g,h]=(0,i.useState)(""),[x,f]=(0,i.useState)(""),[b,v]=(0,i.useState)([]),[j,N]=(0,i.useState)({visibility:"PRIVATE",allowMemberInvites:!0,requireApproval:!1}),k=(0,r.useRouter)(),y=localStorage.getItem("tether_token")||"",S=(e,t,a)=>{o(s=>s.map((s,i)=>i===e?{...s,[t]:a}:s))},T=e=>o(a.filter((t,a)=>a!==e)),C=()=>{if(!e.trim())return p("Product/Team Name is required."),!1;for(let e=0;e<a.length;e++){let t=a[e];if(!t.name.trim()||!t.email.trim()||!t.designation.trim()||!t.team.trim())return p("All fields are required for teammate #".concat(e+1,".")),!1;if(!/^\S+@\S+\.\S+$/.test(t.email))return p("Invalid email for teammate #".concat(e+1,".")),!1}return p(""),!0},P=async t=>{if(t.preventDefault(),C()){c(!0),u("");try{let t={name:e,productName:e,settings:j};g.trim()&&(t.description=g),x.trim()&&(t.productVersion=x),b.length>0&&(t.tags=b);let s=(await n.h.post("http://localhost:5000/api/teams",t,{headers:{Authorization:"Bearer ".concat(y)}})).data.data._id;for(let e of a)e.email&&await n.h.post("http://localhost:5000"+"/api/teams/".concat(s,"/members"),{email:e.email,role:e.designation},{headers:{Authorization:"Bearer ".concat(y)}});await n.x.markUserOnboarded(y),k.push("/dashboard")}catch(e){var s,i;u((null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.message)||"Failed to create team. Try again.")}finally{c(!1)}}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-xl p-8 w-full max-w-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Create Your Product Team"}),(0,s.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Product/Team Name"}),(0,s.jsx)("input",{type:"text",className:"input-field",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Add Teammates"}),a.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,s.jsx)("input",{type:"text",placeholder:"Name",className:"input-field flex-1",value:e.name,onChange:e=>S(t,"name",e.target.value),required:!0}),(0,s.jsx)("input",{type:"email",placeholder:"Email",className:"input-field flex-1",value:e.email,onChange:e=>S(t,"email",e.target.value),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Designation",className:"input-field flex-[1.5]",value:e.designation,onChange:e=>S(t,"designation",e.target.value),required:!0}),(0,s.jsxs)("select",{className:"input-field flex-1",value:e.team,onChange:e=>S(t,"team",e.target.value),required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select Department"}),(0,s.jsx)("option",{value:"Product",children:"Product"}),(0,s.jsx)("option",{value:"Dev",children:"Dev"}),(0,s.jsx)("option",{value:"Design",children:"Design"}),(0,s.jsx)("option",{value:"Legal",children:"Legal"}),(0,s.jsx)("option",{value:"Security",children:"Security"}),(0,s.jsx)("option",{value:"Biz Ops",children:"Biz Ops"}),(0,s.jsx)("option",{value:"Stakeholder",children:"Stakeholder"})]}),a.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>T(t),className:"btn-error px-2 py-1",children:"\xd7"})]},t)),(0,s.jsx)("button",{type:"button",onClick:()=>o([...a,{name:"",email:"",designation:"",team:""}]),className:"btn-secondary mt-2",children:"+ Add Teammate"})]}),m&&(0,s.jsx)("div",{className:"text-error-600 text-sm mb-2",children:m}),d&&(0,s.jsx)("div",{className:"text-error-600 text-sm mb-2",children:d}),(0,s.jsx)("button",{type:"submit",className:"btn-primary w-full",disabled:l,children:l?"Creating...":"Create Team & Continue"})]})]})})}},9116:function(e,t,a){"use strict";a.d(t,{h:function(){return s},x:function(){return i}});let s=a(3464).Z.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{{let t=localStorage.getItem("tether_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>Promise.reject(e));let i={getTeams:()=>s.get("/api/teams"),getTeam:e=>s.get("/api/teams/".concat(e)),createTeam:e=>s.post("/api/teams",e),updateTeam:(e,t)=>s.put("/api/teams/".concat(e),t),deleteTeam:e=>s.delete("/api/teams/".concat(e)),getTeamStats:e=>s.get("/api/teams/".concat(e,"/stats")),addTeamMember:(e,t)=>s.post("/api/teams/".concat(e,"/members"),t),removeTeamMember:(e,t)=>s.delete("/api/teams/".concat(e,"/members/").concat(t)),getUserProfile:()=>s.get("/api/users/profile"),updateUserProfile:e=>s.put("/api/users/profile",e),getUserStats:()=>s.get("/api/users/stats"),searchUsers:e=>s.get("/api/users/search?q=".concat(e)),getLeaderboard:()=>s.get("/api/users/leaderboard"),getLinks:e=>s.get("/api/links",{params:e}),getLink:e=>s.get("/api/links/".concat(e)),createLink:e=>s.post("/api/links",e),updateLink:(e,t)=>s.put("/api/links/".concat(e),t),deleteLink:e=>s.delete("/api/links/".concat(e)),startMeeting:e=>s.post("/api/links/".concat(e,"/start")),completeMeeting:(e,t)=>s.post("/api/links/".concat(e,"/complete"),t),addOutcome:(e,t)=>s.post("/api/links/".concat(e,"/outcomes"),t),getTeamLinks:e=>s.get("/api/links/team/".concat(e)),getNudges:e=>s.get("/api/nudges",{params:e}),getNudge:e=>s.get("/api/nudges/".concat(e)),sendNudge:e=>s.post("/api/nudges",e),respondToNudge:(e,t)=>s.post("/api/nudges/".concat(e,"/respond"),t),deleteNudge:e=>s.delete("/api/nudges/".concat(e)),getTeamNudges:e=>s.get("/api/nudges/team/".concat(e)),getDashboardOverview:()=>s.get("/api/dashboard/overview"),getTeamDashboard:e=>s.get("/api/dashboard/team/".concat(e)),getCXODashboard:()=>s.get("/api/dashboard/cxo"),getAnalytics:e=>s.get("/api/dashboard/analytics",{params:e}),getUserMe:()=>s.get("/api/proxy/users/me"),markUserOnboarded:e=>s.put("/api/users/onboarded",{},{headers:{Authorization:"Bearer ".concat(e)}})}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=7723)}),_N_E=e.O()}]);