"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{9236:function(e,t,a){a.d(t,{Z:function(){return l}});var r=a(7437),s=a(2265),n=a(2489),i=a(8674),o=a(9116);function l(e){let{isOpen:t,onClose:a}=e,[l,c]=(0,s.useState)({name:"",productName:"",description:""}),[d,m]=(0,s.useState)([{name:"",email:"",role:"",department:""}]),[u,p]=(0,s.useState)(""),g=(0,i.K5)(),h=async e=>{e.preventDefault(),p("");try{let e={...l,name:l.productName},t=await g.mutateAsync(e);for(let e of d)if(e.email&&e.department)try{await o.x.addTeamMember(t._id,{email:e.email,role:e.department,firstName:e.name})}catch(t){p("Failed to add teammate: ".concat(e.email))}c({name:"",productName:"",description:""}),m([{name:"",email:"",role:"",department:""}]),a()}catch(e){console.error("Error creating team:",e instanceof Error?e.message:String(e))}},x=e=>{c(t=>({...t,[e.target.name]:e.target.value}))},b=(e,t,a)=>{m(r=>r.map((r,s)=>s===e?{...r,[t]:a}:r))},f=e=>m(d.filter((t,a)=>a!==e));return t?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Team"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(n.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"productName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),(0,r.jsx)("input",{type:"text",id:"productName",name:"productName",value:l.productName,onChange:x,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Tether Mobile App"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{id:"description",name:"description",value:l.description,onChange:x,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Brief description of the project's purpose..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Teammates"}),d.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,r.jsx)("input",{type:"text",placeholder:"First Name",className:"input-field flex-1",value:e.name,onChange:e=>b(t,"name",e.target.value)}),(0,r.jsx)("input",{type:"email",placeholder:"Email",className:"input-field flex-1",value:e.email,onChange:e=>b(t,"email",e.target.value)}),(0,r.jsx)("input",{type:"text",placeholder:"Designation",className:"input-field flex-1",value:e.role,onChange:e=>b(t,"role",e.target.value)}),(0,r.jsxs)("select",{className:"input-field flex-1",value:e.department||"",onChange:e=>b(t,"department",e.target.value),children:[(0,r.jsx)("option",{value:"",disabled:!0,children:"Select Department"}),(0,r.jsx)("option",{value:"Product",children:"Product"}),(0,r.jsx)("option",{value:"Dev",children:"Dev"}),(0,r.jsx)("option",{value:"Design",children:"Design"}),(0,r.jsx)("option",{value:"Legal",children:"Legal"}),(0,r.jsx)("option",{value:"Security",children:"Security"}),(0,r.jsx)("option",{value:"Biz Ops",children:"Biz Ops"}),(0,r.jsx)("option",{value:"Stakeholder",children:"Stakeholder"})]}),d.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>f(t),className:"btn-error px-2 py-1",children:"\xd7"})]},t)),(0,r.jsx)("button",{type:"button",onClick:()=>m([...d,{name:"",email:"",role:"",department:""}]),className:"btn-secondary mt-2",children:"+ Add Teammate"}),u&&(0,r.jsx)("div",{className:"text-error-600 text-sm mt-2",children:u})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:g.isLoading||!l.productName,className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g.isLoading?"Creating...":"Create Team"})]})]}),!!g.error&&(0,r.jsx)("div",{className:"mt-4 p-3 bg-error-50 border border-error-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-error-700",children:"Error creating team. Please try again."})})]})})}):null}},8674:function(e,t,a){a.d(t,{K5:function(){return o},y2:function(){return i}});var r=a(6484),s=a(2531),n=a(9116);function i(){let{setTeams:e,clearSelectedTeamIfInvalid:t}=(0,s.A)(),{data:a,isLoading:i,isError:o,refetch:l}=(0,r.useQuery)("teams",async()=>(await n.h.get("/api/teams")).data.data,{onSuccess:a=>{e(a),t()},onError:e=>{console.error("Error fetching teams:",e)}});return{teams:a,loading:i,error:o,refetch:l}}function o(){let e=(0,r.useQueryClient)(),{addTeam:t}=(0,s.A)();return(0,r.useMutation)(async e=>(await n.h.post("/api/teams",e)).data.data,{onSuccess:a=>{e.invalidateQueries("teams"),t(a)},onError:e=>{console.error("Error creating team:",e)}})}},9116:function(e,t,a){a.d(t,{h:function(){return r},x:function(){return s}});let r=a(3464).Z.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let t=localStorage.getItem("tether_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>Promise.reject(e));let s={getTeams:()=>r.get("/api/teams"),getTeam:e=>r.get("/api/teams/".concat(e)),createTeam:e=>r.post("/api/teams",e),updateTeam:(e,t)=>r.put("/api/teams/".concat(e),t),deleteTeam:e=>r.delete("/api/teams/".concat(e)),getTeamStats:e=>r.get("/api/teams/".concat(e,"/stats")),addTeamMember:(e,t)=>r.post("/api/teams/".concat(e,"/members"),t),removeTeamMember:(e,t)=>r.delete("/api/teams/".concat(e,"/members/").concat(t)),getUserProfile:()=>r.get("/api/users/profile"),updateUserProfile:e=>r.put("/api/users/profile",e),getUserStats:()=>r.get("/api/users/stats"),searchUsers:e=>r.get("/api/users/search?q=".concat(e)),getLeaderboard:()=>r.get("/api/users/leaderboard"),getLinks:e=>r.get("/api/links",{params:e}),getLink:e=>r.get("/api/links/".concat(e)),createLink:e=>r.post("/api/links",e),updateLink:(e,t)=>r.put("/api/links/".concat(e),t),deleteLink:e=>r.delete("/api/links/".concat(e)),startMeeting:e=>r.post("/api/links/".concat(e,"/start")),completeMeeting:(e,t)=>r.post("/api/links/".concat(e,"/complete"),t),addOutcome:(e,t)=>r.post("/api/links/".concat(e,"/outcomes"),t),getTeamLinks:e=>r.get("/api/links/team/".concat(e)),getNudges:e=>r.get("/api/nudges",{params:e}),getNudge:e=>r.get("/api/nudges/".concat(e)),sendNudge:e=>r.post("/api/nudges",e),respondToNudge:(e,t)=>r.post("/api/nudges/".concat(e,"/respond"),t),deleteNudge:e=>r.delete("/api/nudges/".concat(e)),getTeamNudges:e=>r.get("/api/nudges/team/".concat(e)),getDashboardOverview:()=>r.get("/api/dashboard/overview"),getTeamDashboard:e=>r.get("/api/dashboard/team/".concat(e)),getCXODashboard:()=>r.get("/api/dashboard/cxo"),getAnalytics:e=>r.get("/api/dashboard/analytics",{params:e}),getUserMe:()=>r.get("/api/proxy/users/me"),markUserOnboarded:e=>r.put("/api/users/onboarded",{},{headers:{Authorization:"Bearer ".concat(e)}})}},2531:function(e,t,a){a.d(t,{A:function(){return n}});var r=a(7094),s=a(6885);let n=(0,r.Ue)()((0,s.tJ)((e,t)=>({selectedTeam:null,teams:[],setSelectedTeam:t=>e({selectedTeam:t}),setTeams:t=>e({teams:t}),addTeam:t=>e(e=>({teams:[...e.teams,t]})),updateTeam:(t,a)=>e(e=>{var r;return{teams:e.teams.map(e=>e._id===t?{...e,...a}:e),selectedTeam:(null===(r=e.selectedTeam)||void 0===r?void 0:r._id)===t?{...e.selectedTeam,...a}:e.selectedTeam}}),removeTeam:t=>e(e=>{var a;return{teams:e.teams.filter(e=>e._id!==t),selectedTeam:(null===(a=e.selectedTeam)||void 0===a?void 0:a._id)===t?null:e.selectedTeam}}),clearSelectedTeamIfInvalid:()=>e(e=>({selectedTeam:!e.selectedTeam||e.selectedTeam._id&&e.teams.find(t=>t._id===e.selectedTeam._id)?e.selectedTeam:null})),clearAll:()=>e({selectedTeam:null,teams:[]})}),{name:"tether-team-store",partialize:e=>({selectedTeam:e.selectedTeam,teams:e.teams})}))}}]);